<div>
  <div class="loading" *ngIf="loading">
    <div class="effect-1 effects"></div>
    <div class="effect-2 effects"></div>
    <div class="effect-3 effects"></div>
  </div>
  <div
    *ngIf="layout_type == 'others'"
    class="row body-cls"
    style="
      margin-right: 0px !important;
      margin-left: 0px !important;
      font-family: 'Roboto Condensed', sans-serif;
    "
  >
    <div class="d-none d-lg-flex col-lg-4"></div>
    <div class="col-lg-4" style="margin-right: 0px !important">
      <div>
        <div class="mt-1">
          <!-- Medal Card -->
          <div class="card" style="padding: 5px">
            <div class="card-body position-relative">
              <!-- Three Dots Menu -->
              <div
                class="dropdown"
                style="position: absolute; right: 16px; top: 16px"
                ngbDropdown
              >
                <button
                  class="btn btn-link p-0 border-0"
                  type="button"
                  id="dropdownMenuButton"
                  ngbDropdownToggle
                  aria-expanded="false"
                >
                  <i data-feather="more-vertical" style="color: black"></i>
                </button>
                <ul
                  class="dropdown-menu dropdown-menu-right"
                  aria-labelledby="dropdownMenuButton"
                >
                  <li>
                    <a class="dropdown-item" (click)="editProfile()"
                      >Profile Settings</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" (click)="logout()">Logout</a>
                  </li>
                </ul>
              </div>
              <div class="text-center">
                <ng-container *ngIf="currentUser">
                  <div (click)="gotoProfile()">
                    <img
                      *ngIf="httpService.USERINFO.avatar"
                      class="round"
                      [src]="user_image"
                      alt="avatar"
                    />
                    <img
                      *ngIf="httpService.USERINFO.avatar == null"
                      class="round"
                      src="assets/images/leaderboard/person.png"
                      alt="avatar"
                      style="background-color: white"
                    />
                  </div>
                  <div
                    class="mt-1"
                    style="font-family: 'Roboto Condensed', sans-serif"
                  >
                    <h3>
                      <b>{{ currentUser.user_name }}</b>
                    </h3>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>

        <div
          *ngIf="
            !loading && rows.length > 0 && campaign_data.games != undefined
          "
        >
          <div class="card earnings-card">
            <div class="card-body">
              <!-- Title with line -->
              <div class="row">
                <div class="col-12">
                  <h4
                    class="card-title mb-0"
                    style="color: blue; font-weight: 400"
                  >
                    <b>SELECT YOUR WINNER</b>
                  </h4>
                  <hr />
                </div>
              </div>
              <ngb-carousel
                [interval]="1000"
                [pauseOnHover]="false"
                *ngIf="
                  campaign_data.games != undefined &&
                  campaign_data.games.length > 0
                "
              >
                <ng-template ngbSlide *ngFor="let game of campaign_data.games">
                  <div
                    class="carousel-img-wrapper pt-2 pl-2 pr-2"
                    style="
                      background-color: rgb(238, 248, 248) !important;
                      color: white !important;
                    "
                  >
                    <div
                      class="row"
                      style="margin-left: 3px; font-weight: bolder"
                    >
                      <div>
                        <span
                          style="color: gray"
                          *ngIf="
                            campaign_data.games != undefined &&
                            campaign_data.games.length > 0
                          "
                        >
                          <span
                            class="mb-1"
                            style="
                              margin-bottom: -0px !important;
                              font-size: 16px;
                            "
                          >
                            <b
                              >{{ campaign_data.campaign_title }} -
                              <span
                                *ngIf="
                                  campaign_data.games != undefined &&
                                  campaign_data.games.length > 0
                                "
                                >{{ game.name }}</span
                              ></b
                            >
                          </span>
                        </span>
                      </div>
                    </div>

                    <div class="row" style="margin-left: 3px; color: gray">
                      <b>
                        <span style="font-size: 12px">
                          Campaign Dates:
                          {{ campaign_data.start_date }} to
                          {{ campaign_data.end_date }}</span
                        >
                      </b>
                    </div>
                    <div class="row mt-4">
                      <div
                        class="col-6 d-flex justify-content-center align-items-center"
                      >
                        <div
                          *ngIf="campaign_data.self.team_name == game.team_a"
                          style="margin-bottom: 10px"
                        >
                          <div class="badge badge-glow badge-success">
                            Predicted
                          </div>
                        </div>
                      </div>
                      <div
                        class="col-6 d-flex justify-content-center align-items-center"
                      >
                        <div
                          *ngIf="campaign_data.self.team_name == game.team_b"
                          style="margin-bottom: 10px"
                        >
                          <div class="badge badge-glow badge-success">
                            Predicted
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="row pb-2"
                      style="margin-bottom: 20px !important"
                    >
                      <div
                        class="col-6 d-flex justify-content-center align-items-center"
                      >
                        <div
                          id="earnings-donut-chart"
                          class="d-flex align-items-center justify-content-center position-relative"
                          #earningChartRef
                          style="
                            width: 120px;
                            height: 105px;
                            border-radius: 50%;
                            overflow: hidden;
                            cursor: pointer;
                          "
                          (click)="
                            campaign_data.self.team_name == null &&
                              modalsService.modalOpenDanger(modalDanger, game)
                          "
                        >
                          <img
                            *ngIf="game.team_a_image"
                            [src]="apiUrl + game.team_a_image"
                            alt="Image"
                            class="team-image"
                            style="width: 80%; height: auto"
                          />
                          <img
                            *ngIf="game.team_a_image == null"
                            src="assets/images/profile/team.png"
                            alt="Image"
                            class="team-image"
                            style="width: 80%; height: auto"
                          />

                          <apx-chart
                            [chart]="{
                              type: 'donut',
                              width:
                                isMenuToggled === false
                                  ? earningChartRef.offsetWidth
                                  : teamBChartOptions.chart.width,
                              height: 120,
                              toolbar: {
                                show: false
                              }
                            }"
                            [dataLabels]="teamAChartOptions.dataLabels"
                            [series]="teamAChartOptions.series"
                            [legend]="teamAChartOptions.legend"
                            [labels]="teamAChartOptions.labels"
                            [stroke]="teamAChartOptions.stroke"
                            [colors]="teamAChartOptions.colors"
                            [grid]="teamAChartOptions.grid"
                            [plotOptions]="teamAChartOptions.plotOptions"
                          ></apx-chart>
                        </div>
                      </div>
                      <div
                        class="col-6 d-flex justify-content-center align-items-center"
                      >
                        <div
                          id="earnings-donut-chart"
                          class="d-flex align-items-center justify-content-center position-relative"
                          #earningChartRef
                          style="
                            width: 120px;
                            height: 105px;
                            border-radius: 50%;
                            overflow: hidden;
                            cursor: pointer;
                          "
                          (click)="
                            campaign_data.self.team_name == null &&
                              modalsService.modalOpenDanger(modalDanger, game)
                          "
                        >
                          <img
                            *ngIf="game.team_b_image"
                            [src]="apiUrl + game.team_b_image"
                            alt="Image"
                            class="team-image"
                            style="width: 80%; height: auto"
                          />
                          <img
                            *ngIf="game.team_b_image == null"
                            src="assets/images/profile/team.png"
                            alt="Image"
                            class="team-image"
                            style="width: 80%; height: auto"
                          />

                          <apx-chart
                            [chart]="{
                              type: 'donut',
                              width:
                                isMenuToggled === false
                                  ? earningChartRef.offsetWidth
                                  : teamBChartOptions.chart.width,
                              height: 120,
                              toolbar: {
                                show: false
                              }
                            }"
                            [dataLabels]="teamBChartOptions.dataLabels"
                            [series]="teamBChartOptions.series"
                            [legend]="teamBChartOptions.legend"
                            [labels]="teamBChartOptions.labels"
                            [stroke]="teamBChartOptions.stroke"
                            [colors]="teamBChartOptions.colors"
                            [grid]="teamBChartOptions.grid"
                            [plotOptions]="teamBChartOptions.plotOptions"
                          ></apx-chart>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div
                    class="carousel-caption mt-2"
                    style="margin-top: 20px !important"
                  ></div>
                </ng-template>
              </ngb-carousel>
            </div>
          </div>
        </div>
        <div *ngIf="!loading && rows.length == 0" style="color: white">
          Not yet participated in any Campaign..
          <button (click)="tryAgain()">Try again</button>
        </div>

        <div
          *ngIf="
            !loading &&
            rows.length > 0 &&
            campaign_data.quizzes != undefined &&
            campaign_data.quizzes.length > 0 &&
            campaign_data?.self == undefined
          "
        >
          <div class="card earnings-card">
            <div class="card-body">
              <div class="row">
                <div
                  class="col-12"
                  *ngIf="currentQuestionIndex == -1 && !submitted"
                >
                  <div class="time-available-wrapper">
                    <div class="time-available">
                      <div class="time-text">
                        Available Time: {{ formatTime(remainingTime) }}
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="col-12"
                  *ngIf="remainingTime && currentQuestionIndex >= 0"
                >
                  <div class="time-available-wrapper">
                    <div class="time-available">
                      <div class="time-text">
                        Time Remaining: {{ formatTime(remainingTime) }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <h4
                    class="d-flex card-title mb-0 mt-1 justify-content-center align-items-center"
                    style="color: blue; font-weight: 400"
                  >
                    <b>
                      <i
                        ><span style="font-size: 20px">QUIZ QUEST:</span>
                        {{ campaign_data.campaign_title }}</i
                      ></b
                    >
                  </h4>
                </div>
              </div>

              <hr />
              <span
                class="d-flex card-title mb-0 mt-0 justify-content-center align-items-center"
                style="color: blue; font-size: 1rem"
              >
              </span>
              <p class="mt-1">{{ campaign_data.description }}</p>
              <div class="row">
                <div class="col-12">
                  <div class="container-new" *ngIf="currentQuestionIndex >= 0">
                    <!-- <div *ngIf="remainingTime">
                          Time Remaining: {{ formatTime(remainingTime) }}
                        </div> -->
                    <h5 class="question-text" style="text-align: left">
                      {{ campaign_data.quizzes[currentQuestionIndex].question }}
                    </h5>

                    <div
                      *ngIf="
                        campaign_data.quizzes[currentQuestionIndex].file_name
                      "
                      class="align-items-center justify-content-center d-flex mb-1"
                    >
                      <img
                        [src]="
                          apiUrl +
                          campaign_data.quizzes[currentQuestionIndex].image
                        "
                        alt="Question Image"
                        width="100%"
                        height="100%"
                      />
                    </div>
                    <div class="demo-inline-spacing">
                      <label
                        class="custom-radio"
                        [class.selected]="
                          selectedWinner ===
                          campaign_data.quizzes[currentQuestionIndex].response_a
                        "
                        for="inlineRadio1"
                      >
                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="inlineRadio1"
                          [value]="
                            campaign_data.quizzes[currentQuestionIndex]
                              .response_a
                          "
                          [(ngModel)]="selectedWinner"
                        />
                        <span>{{
                          campaign_data.quizzes[currentQuestionIndex].response_a
                        }}</span>
                      </label>
                      <label
                        class="custom-radio"
                        [class.selected]="
                          selectedWinner ===
                          campaign_data.quizzes[currentQuestionIndex].response_b
                        "
                        for="inlineRadio2"
                      >
                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="inlineRadio2"
                          [value]="
                            campaign_data.quizzes[currentQuestionIndex]
                              .response_b
                          "
                          [(ngModel)]="selectedWinner"
                        />
                        <span>{{
                          campaign_data.quizzes[currentQuestionIndex].response_b
                        }}</span>
                      </label>
                      <label
                        class="custom-radio"
                        [class.selected]="
                          selectedWinner ===
                          campaign_data.quizzes[currentQuestionIndex].response_c
                        "
                        for="inlineRadio3"
                      >
                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="inlineRadio3"
                          [value]="
                            campaign_data.quizzes[currentQuestionIndex]
                              .response_c
                          "
                          [(ngModel)]="selectedWinner"
                        />
                        <span>{{
                          campaign_data.quizzes[currentQuestionIndex].response_c
                        }}</span>
                      </label>
                      <label
                        class="custom-radio"
                        [class.selected]="
                          selectedWinner ===
                          campaign_data.quizzes[currentQuestionIndex].response_d
                        "
                        for="inlineRadio4"
                      >
                        <input
                          class="form-check-input"
                          type="radio"
                          name="inlineRadioOptions"
                          id="inlineRadio4"
                          [value]="
                            campaign_data.quizzes[currentQuestionIndex]
                              .response_d
                          "
                          [(ngModel)]="selectedWinner"
                        />
                        <span>{{
                          campaign_data.quizzes[currentQuestionIndex].response_d
                        }}</span>
                      </label>
                    </div>
                    <div class="navigation-buttons">
                      <button
                        *ngIf="
                          currentQuestionIndex !=
                          this.campaign_data.quizzes.length - 1
                        "
                        class="btn btn-primary btn-primary-predict"
                        rippleEffect
                        (click)="goToNextQuestion()"
                        [disabled]="!selectedWinner"
                      >
                        Next
                      </button>

                      <button
                        *ngIf="
                          currentQuestionIndex >=
                          this.campaign_data.quizzes.length - 1
                        "
                        class="btn btn-primary btn-primary-predict"
                        rippleEffect
                        (click)="goToNextQuestion()"
                        [disabled]="!selectedWinner"
                      >
                        Submit
                      </button>
                    </div>
                    <div class="row navigation-buttons float-right">
                      <div class="col-12">
                        {{ currentQuestionIndex + 1 }}/{{
                          campaign_data.quizzes.length
                        }}
                      </div>
                    </div>
                  </div>

                  <div
                    *ngIf="currentQuestionIndex == -1 && !submitted && !showGif"
                  >
                    <div class="row">
                      <p class="ml-1 mr-1"></p>

                      <img
                        class="col-12"
                        [src]="
                          campaign_data?.campaign_image
                            ? apiUrl + campaign_data.campaign_image
                            : loginImage
                        "
                        alt="Prediction"
                        style="object-fit: cover !important; width: 100%"
                      />
                      <br />
                    </div>
                    <div class="row mt-2">
                      <button class="col-6 btn btn-primary-TandC mb-1">
                        T&Cs
                      </button>
                      <button
                        class="col-6 btn btn-primary btn-primary-predict mb-1"
                        rippleEffect
                        (click)="startCountdown()"
                      >
                        Start
                      </button>
                    </div>
                  </div>
                  <div *ngIf="showGif" class="gif-container">
                    <img
                      src="assets/images/pages/quiz_countdown.gif"
                      alt="Starting GIF"
                      width="120"
                      height="120"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card" *ngIf="campaign_data?.self != undefined">
          <div class="d-flex align-items-center justify-content-center mt-1">
            <h4
              style="
                color: blue;
                font-weight: bold;
                font-style: italic;
                text-transform: uppercase;
                font-family: 'Roboto Condensed';
                font-size: 20px;
              "
            >
              <b
                ><i>{{ campaign_data.campaign_title }}</i></b
              >
            </h4>
          </div>
          <hr />
          <div
            class="card-body"
            style="padding: 0 !important; overflow: hidden"
          >
            <div class="row" style="padding-bottom: 1rem !important">
              <div class="col-12">
                <div class="submission-container">
                  <div class="submission-text">
                    <p
                      style="
                        font-style: italic;
                        color: blue;
                        padding-bottom: 0.1rem !important;
                        font-size: 16px;
                      "
                    >
                      <b>QUIZ QUEST</b>
                    </p>
                    <b>Submitted</b>
                    <br />
                    <b>Time Taken: {{ campaign_data?.total_time_taken }}</b
                    ><br />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          *ngIf="!loading && !refresh_loading && rows.length > 0"
          #scrollableDiv
          [ngClass]="{
            'scrollable-container':
              campaign_data.participants != undefied &&
              campaign_data.participants.length > 10
          }"
          (scroll)="
            campaign_data.participants != undefied &&
            campaign_data.participants.length > 10
              ? onScroll($event)
              : null
          "
        >
          <!-- Company Table -->

          <div class="card" style="border-radius: 8px !important">
            <div
              class="card-body"
              style="padding: 0 !important; overflow: hidden"
            >
              <div class="row" style="padding: 1.5rem !important">
                <div class="col-12">
                  <div class="leaderboard-header">
                    <h4
                      class="card-title mb-0"
                      style="
                        color: blue;
                        font-weight: bold;
                        font-style: italic;
                        text-transform: uppercase;
                        font-family: 'Roboto Condensed';
                        font-size: 20px;
                      "
                    >
                      <b><i>Leaderboard</i></b>
                    </h4>
                    <button
                      (click)="getParticipantsInfo()"
                      class="refresh-button"
                    >
                      <i data-feather="refresh-cw"></i>
                    </button>
                  </div>

                  <div style="margin-bottom: 8px"></div>
                </div>
              </div>

              <div *ngIf="rows.length > 0">
                <div
                  style="
                    margin: 0 !important;
                    border-top: 1px solid rgb(216, 212, 212);
                  "
                  *ngFor="
                    let participant of campaign_data.participants;
                    let i = index
                  "
                >
                  <div
                    class="row"
                    style="
                      padding-top: 12px;
                      padding-bottom: 12px;
                      padding-left: 2rem !important;
                      padding-right: 2rem !important;
                    "
                    [ngStyle]="{
                      'background-color':
                        participant.user_id == httpService.USERINFO.id
                          ? '#DFD8F7'
                          : 'transparent'
                    }"
                  >
                    <div
                      class="col-12"
                      style="padding: 0 !important; margin: 0 !important"
                    >
                      <div
                        class="row"
                        style="
                          padding-top: 4px;
                          border-top-width: 1px;
                          border-bottom-width: 1px;
                        "
                      >
                        <div class="col-2">
                          <span
                            [ngClass]="{
                              'avatar-wrapper':
                                participant.rank === 1 ||
                                participant.rank === 2 ||
                                participant.rank === 3
                            }"
                          >
                            <img
                              style="background-color: none"
                              *ngIf="participant.avatar"
                              class="round avatar-image"
                              [src]="apiUrl + participant.avatar"
                              alt="avatar"
                              height="50"
                              width="50"
                            />
                            <img
                              style="background-color: none"
                              *ngIf="participant.avatar == null"
                              class="round avatar-image"
                              src="assets/images/leaderboard/person.png"
                              alt="avatar"
                              height="50"
                              width="50"
                              style="background-color: white"
                            />
                          </span>
                        </div>
                        <div class="col-8 d-flex align-items-center">
                          <!-- User name aligned to the center -->
                          <img
                            *ngIf="participant.rank == 1"
                            class="ml-1"
                            src="assets/images/profile/first.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <img
                            *ngIf="participant.rank == 2"
                            class="ml-1"
                            src="assets/images/profile/second.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <img
                            *ngIf="participant.rank == 3"
                            class="ml-1"
                            src="assets/images/profile/third.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <h4 class="card-title mb-0 ml-1">
                            <b>
                              <span
                                style="
                                  font-size: 14px;
                                  display: flex;
                                  flex-direction: row;
                                  align-items: center;
                                  margin-top: -10px !important;
                                "
                              >
                                <div class="d-none d-md-flex">
                                  {{ participant.user_name }}
                                </div>

                                <!-- Display on small and mobile screens (xs and sm) -->
                                <div class="d-flex d-md-none">
                                  {{ participant.user_name | truncate : 8 }}
                                </div>

                                <!-- <button
                                  type="button"
                                  rippleEffect
                                  class="btn"
                                  [ngbTooltip]="'Time taken: ' + participant.time_taken"
                                  style="display: inline-flex; align-items: center;margin-left:-10px !important;width: 100%; "
                                > -->
                                <span
                                  rippleEffect
                                  class="btn"
                                  [ngbTooltip]="
                                    'Time taken: ' + participant.time_taken
                                  "
                                >
                                  <i
                                    data-feather="alert-circle"
                                    style="color: black"
                                  ></i>
                                </span>
                                <!-- </button> -->
                              </span>
                            </b>
                          </h4>
                        </div>
                        <div
                          class="col-2 d-flex align-items-center justify-content-center"
                          style="margin-top: 0px !important"
                        >
                          <span
                            *ngIf="participant.total_points > 0"
                            style="margin-top: -10px !important"
                          >
                            {{ participant.total_points }} Pts
                          </span>
                          <span *ngIf="participant.total_points == 0">
                            0 Pts
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="loader-container" *ngIf="refresh_loading">
          <div class="spinner"></div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-flex col-lg-4"></div>
  </div>

  <div
    *ngIf="layout_type == 'HTML games'"
    class="row"
    style="
      margin-right: 0px !important;
      margin-left: 0px !important;
      font-family: 'Roboto Condensed', sans-serif;
      width: 100%;
    "
  >
    <div class="d-none d-lg-flex col-lg-4"></div>
    <div class="col-lg-4" style="margin-right: 0px !important;padding-left: 0px !important;padding-right: 0px !important;">
      <div
        *ngIf="gameStatus === 'none'"
        class="bg-image-container d-flex flex-column justify-content-between align-items-center text-center"
        [ngStyle]="
          activeTab === 'home'
            ? {
                'background-image':
                  'url(' +
                  (campaign_id && campaign_data?.html_games?.game_welcome_image
                    ? apiUrl + campaign_data.html_games.game_welcome_image
                    : welcome_image) +
                  ')'
              }
            : {
                background: 'linear-gradient(to right, #CED2FA, #B7ACE2)'
              }
        "
      >
        <!-- Title -->
        <div style="width: 100%">
          <div
            class="dropdown"
            style="position: absolute; right: 16px; top: 16px"
            ngbDropdown
          >
            <button
              class="btn btn-link p-0 border-0"
              type="button"
              id="dropdownMenuButton"
              ngbDropdownToggle
              aria-expanded="false"
            >
              <i data-feather="more-vertical" style="color: black"></i>
            </button>
            <ul
              class="dropdown-menu dropdown-menu-right"
              aria-labelledby="dropdownMenuButton"
            >
              <li>
                <a class="dropdown-item" (click)="editProfile()"
                  >Profile Settings</a
                >
              </li>
              <li>
                <a class="dropdown-item" (click)="logout()">Logout</a>
              </li>
            </ul>
          </div>

          <div
            class="campaign-title"
            [ngClass]="{
              'white-title': activeTab === 'home',
              'blue-title': activeTab !== 'home'
            }"
          >
            {{ campaign_data?.campaign_title || "WELCOME" }}
          </div>

          <div
            class="same-width-container button-group mt-3"
            style="z-index: 99999"
          >
            <button
              class="top-btn"
              [ngClass]="{ 'active-btn': activeTab === 'home' }"
              (click)="setTab('home')"
            >
              HOME
            </button>
            <button
              class="top-btn"
              [ngClass]="{ 'active-btn': activeTab === 'leaderboard' }"
              (click)="setTab('leaderboard')"
            >
              LEADERBOARD
            </button>
            <button
              class="top-btn"
              [ngClass]="{ 'active-btn': activeTab === 'prizes' }"
              (click)="setTab('prizes')"
            >
              PRIZES
            </button>
            <div
              *ngIf="activeTab == 'home'"
              style="position: absolute; bottom: 40px; "
            >
              <div class="mb-5">
                <button class="go-button" (click)="gotoGameStart()">
                  LET'S GO
                </button>
              </div>
            </div>
          </div>

          <div
            class="podium-wrapper d-flex justify-content-center align-items-end"
            *ngIf="activeTab == 'leaderboard'"
          >
            <div
              class="podium podium-2 text-center d-flex justify-content-center align-items-center"
            >
              <img
                *ngIf="campaign_data?.participants[1]?.avatar"
                class="round avatar"
                [src]="apiUrl + campaign_data?.participants[1]?.avatar"
                alt="avatar"
                height="50"
                width="50"
              />
              <img
                *ngIf="!campaign_data?.participants[1]?.avatar"
                class="round avatar"
                src="assets/images/leaderboard/person.png"
                alt="avatar"
                height="50"
                width="50"
              />
              <p class="name">
                <b>
                  {{
                    campaign_data?.participants[1]?.user_name || "2nd place"
                  }}</b
                >
              </p>
              <div
                class="position-label position-label-2 d-flex align-items-center justify-content-center"
              >
                2
              </div>
            </div>

            <div
              class="podium podium-1 text-center d-flex justify-content-center align-items-center"
            >
              <img
                *ngIf="campaign_data?.participants[0]?.avatar"
                class="round avatar"
                [src]="apiUrl + campaign_data?.participants[0]?.avatar"
                alt="avatar"
                height="50"
                width="50"
              />
              <img
                *ngIf="!campaign_data?.participants[0]?.avatar"
                class="round avatar"
                src="assets/images/leaderboard/person.png"
                alt="avatar"
                height="50"
                width="50"
              />

              <p class="name">
                <b>
                  {{
                    campaign_data?.participants[0]?.user_name || "1st place"
                  }}</b
                >
              </p>

              <div
                class="position-label position-label-1 d-flex align-items-center justify-content-center"
              >
                1
              </div>
            </div>

            <div
              class="podium podium-3 text-center d-flex justify-content-center align-items-center"
            >
              <img
                *ngIf="campaign_data?.participants[2]?.avatar"
                class="round avatar"
                [src]="apiUrl + campaign_data?.participants[2]?.avatar"
                alt="avatar"
                height="50"
                width="50"
              />
              <img
                *ngIf="!campaign_data?.participants[2]?.avatar"
                class="round avatar"
                src="assets/images/leaderboard/person.png"
                alt="avatar"
                height="50"
                width="50"
              />
              <p class="name">
                <b>
                  {{
                    campaign_data?.participants[1]?.user_name || "3rd place"
                  }}</b
                >
              </p>
              <div
                class="position-label position-label-3 d-flex align-items-center justify-content-center"
              >
                3
              </div>
            </div>
          </div>

          <div
            class="card leaderboard-card"
            *ngIf="activeTab == 'leaderboard'"
            style="
              margin-left: 2rem !important;
              margin-right: 2rem !important;
              margin-left: 2rem !important;
              margin-right: 2rem !important;
              border-radius: 3px !important;
            "
          >
            <div
              class="card-body p-0 overflow-hidden"
              style="border-radius: 5px !important"
            >
              <div class="row px-1">
                <div class="col-12">
                  <div class="leaderboard-header mt-1">
                    <h4
                      class="card-title mb-0"
                      style="
                        color: blue;
                        font-weight: bold;
                        font-style: italic;
                        text-transform: uppercase;
                        font-family: 'Roboto Condensed';
                        font-size: 20px;
                      "
                    >
                      <b><i>Leaderboard</i></b>
                    </h4>
                    <button
                      (click)="getParticipantsInfo()"
                      class="refresh-button"
                    >
                      <i data-feather="refresh-cw"></i>
                    </button>
                  </div>
                </div>
              </div>
              <hr />

              <div *ngIf="rows.length > 0">
                <div
                  style="
                    margin: 0 !important;
                    border-top: 1px solid rgb(216, 212, 212);
                  "
                  *ngFor="
                    let participant of campaign_data.participants;
                    let i = index
                  "
                >
                  <div
                    class="row"
                    style="
                      padding-top: 12px;
                      padding-bottom: 12px;
                      padding-left: 2rem !important;
                      padding-right: 2rem !important;
                    "
                    [ngStyle]="{
                      'background-color':
                        participant.user_id == httpService.USERINFO.id
                          ? '#DFD8F7'
                          : 'transparent'
                    }"
                  >
                    <div
                      class="col-12"
                      style="padding: 0 !important; margin: 0 !important"
                    >
                      <div
                        class="row"
                        style="
                          padding-top: 4px;
                          border-top-width: 1px;
                          border-bottom-width: 1px;
                          margin-left: -1.8rem !important;
                        "
                      >
                        <div class="col-2">
                          <span
                            [ngClass]="{
                              'avatar-wrapper':
                                participant.rank === 1 ||
                                participant.rank === 2 ||
                                participant.rank === 3
                            }"
                          >
                            <img
                              style="background-color: none"
                              *ngIf="participant.avatar"
                              class="round avatar-image"
                              [src]="apiUrl + participant.avatar"
                              alt="avatar"
                              height="50"
                              width="50"
                            />
                            <img
                              style="background-color: none"
                              *ngIf="participant.avatar == null"
                              class="round avatar-image"
                              src="assets/images/leaderboard/person.png"
                              alt="avatar"
                              height="50"
                              width="50"
                              style="background-color: white"
                            />
                          </span>
                        </div>
                        <div class="col-8 d-flex align-items-center">
                          <!-- User name aligned to the center -->
                          <img
                            *ngIf="participant.rank == 1"
                            class="ml-1"
                            src="assets/images/profile/first.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <img
                            *ngIf="participant.rank == 2"
                            class="ml-1"
                            src="assets/images/profile/second.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <img
                            *ngIf="participant.rank == 3"
                            class="ml-1"
                            src="assets/images/profile/third.png"
                            alt="avatar"
                            width="26"
                            style="background-color: transparent"
                          />
                          <h4 class="card-title mb-0 ml-1">
                            <b>
                              <span
                                style="
                                  font-size: 14px;
                                  display: flex;
                                  flex-direction: row;
                                  align-items: center;
                                  margin-top: -10px !important;
                                "
                              >
                                <div class="d-none d-md-flex">
                                  {{ participant.user_name }}
                                </div>

                                <!-- Display on small and mobile screens (xs and sm) -->
                                <div class="d-flex d-md-none">
                                  {{ participant.user_name | truncate : 8 }}
                                </div>

                                <!-- <button
                                  type="button"
                                  rippleEffect
                                  class="btn"
                                  [ngbTooltip]="'Time taken: ' + participant.time_taken"
                                  style="display: inline-flex; align-items: center;margin-left:-10px !important;width: 100%; "
                                > -->
                                <span
                                  rippleEffect
                                  class="btn"
                                  [ngbTooltip]="
                                    'Time taken: ' + participant.time_taken
                                  "
                                >
                                  <i
                                    data-feather="alert-circle"
                                    style="color: black"
                                  ></i>
                                </span>
                                <!-- </button> -->
                              </span>
                            </b>
                          </h4>
                        </div>
                        <div
                          class="col-2 d-flex align-items-center justify-content-center"
                          style="margin-top: 0px !important"
                        >
                          <span
                            *ngIf="participant.total_points > 0"
                            style="margin-top: -10px !important"
                          >
                            {{ participant.total_points }} Pts
                          </span>
                          <span *ngIf="participant.total_points == 0">
                            0 Pts
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div *ngIf="activeTab == 'prizes'">
            <img
              src="../../../../assets/images/prizes/trophy.png"
              style="object-fit: cover !important; width: 100%"
            />
            <div style="margin-top: -4rem !important">
              <div
                class="card leaderboard-card mb-3 ml-2 mr-2"
                style="
                  margin-left: 2rem !important;
                  margin-right: 2rem !important;
                  border-radius: 3px !important;
                "
                *ngFor="let prize of campaign_data.prizes; let i = index"
              >
                <div
                  class="card-body p-0 overflow-hidden"
                  style="border-radius: 5px !important"
                >
                  <div class="px-1">
                    <div class="leaderboard-header mt-1">
                      <div
                        class="row pb-1"
                        style="
                          width: 100%;
                          text-align: left;
                          font-family: 'Roboto Condensed', sans-serif;
                        "
                      >
                        <div class="col-8">
                          <h4
                            class="card-title mb-0"
                            style="
                              color: blue;
                              font-weight: bold;
                              font-style: italic;
                              text-transform: uppercase;
                              font-family: 'Roboto Condensed';
                              font-size: 28px;
                            "
                          >
                            {{ prize.prize_header }}
                          </h4>
                          <span style="font-size: 18px"
                            ><i>{{ prize.prize_desc }}</i></span
                          >
                        </div>
                        <div class="col-4">
                          <img
                            class="prize-image"
                            *ngIf="prize.image"
                            [src]="apiUrl + prize?.image"
                            alt="avatar"
                            height="100"
                            width="100"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        *ngIf="gameStatus == 'start'"
        class="bg-image-container d-flex flex-column justify-content-between align-items-center text-center"
        [style.backgroundImage]="
          'url(' +
          (campaign_id && campaign_data?.html_games?.game_start_image
            ? apiUrl + campaign_data.html_games.game_start_image
            : start_image) +
          ')'
        "
      >
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            height: 100%;
          "
        >
          <div class="mb-5">
            <button
              class="go-button"
              (click)="gotoHome()"
              [style.backgroundColor]="
                campaign_data?.html_games?.selected_secondary_color
              "
            >
              BACK
            </button>
            <button
              class="go-button mt-1"
              (click)="gotoPlayGame(campaign_data.html_games.game_url)"
              [style.backgroundColor]="
                campaign_data?.html_games?.selected_primary_color
              "
            >
              START
            </button>
          </div>
        </div>
      </div>

      <div
        *ngIf="gameStatus == 'end'"
        class="bg-image-container d-flex flex-column justify-content-between align-items-center text-center"
        [style.backgroundImage]="
          'url(' +
          (campaign_id && campaign_data?.html_games?.game_end_image
            ? apiUrl + campaign_data.html_games.game_end_image
            : end_image) +
          ')'
        "
      >
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            height: 100%;
          "
        >
          <div class="mb-5">
            <button
              class="go-button-1"
              (click)="gotoPlayGame(campaign_data.html_games.game_url)"
              [style.backgroundColor]="
                campaign_data?.html_games?.selected_secondary_color
              "
            >
              RETRY
            </button>

            <div class="mb-5">
              <button
                class="go-button-1 mt-1"
                (click)="gotoLeaderboard()"
                [style.backgroundColor]="
                  campaign_data?.html_games?.selected_primary_color
                "
              >
                LEADERBOARD
              </button>
            </div>
          </div>
        </div>

        <div class="d-none d-lg-flex col-lg-4"></div>
      </div>

      <ng-template #modalDanger let-modal>
        <div class="modal-header">
          <h5 class="modal-title">
            <span class="color-cls">Confirm</span>
          </h5>
        </div>
        <div class="modal-body" tabindex="0" ngbAutofocus>
          Are you sure you want to submit your Prediction?
          <br />
          <span class="f-size-class"> This action will not be reversable.</span>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn"
            (click)="modal.dismiss('Cross click')"
            rippleEffect
          >
            No
          </button>
          <button
            type="button"
            class="btn btn-success"
            (click)="selectWinner(modalsService.item)"
            rippleEffect
          >
            Yes
          </button>
        </div>
        <div id="paymob-iframe"></div>
      </ng-template>
    </div>
    <div class="d-none d-lg-flex col-lg-4"></div>
  </div>
</div>
